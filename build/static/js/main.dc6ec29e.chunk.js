(this.webpackJsonp2048=this.webpackJsonp2048||[]).push([[0],{13:function(e,t,a){},14:function(e,t,a){},16:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(4),i=a.n(o),s=(a(13),a(1)),u=a(2),c=a(7),l=a(6),h=(a(14),function(){function e(t){var a=this;Object(s.a)(this,e),this.getRandomNumber=function(){return Math.random()>.1?2:4},this.getRandomArrayIndex=function(e){return Math.floor(e.length*Math.random())},this.isGameWon=function(e){for(var t=a.dimension,n=0;n<t;n++)for(var r=0;r<t;r++)if(2048===e[n][r])return!0;return!1},this.isGameOver=function(e){for(var t=a.dimension,n=0;n<t;n++)for(var r=0;r<t;r++)if(0===e[n][r]||n!==t-1&&e[n][r]===e[n+1][r]||r!==t-1&&e[n][r]===e[n][r+1])return!1;return!0},this.onMove=function(e){return a.moveCallback=e},this.onWin=function(e){return a.winCallback=e},this.onLose=function(e){return a.loseCallback=e},this.dimension=t,this.setupNewGame()}return Object(u.a)(e,[{key:"setupNewGame",value:function(){var e=this.blankGrid();this.addNumber(e),this.addNumber(e),this.gameState={board:this.convertTo1D(e),score:0,won:!1,over:!1}}},{key:"loadGame",value:function(e){this.gameState=e}},{key:"addNumber",value:function(e){for(var t=[],a=this.dimension,n=0;n<a;n++)for(var r=0;r<a;r++)0===e[n][r]&&t.push({col:n,row:r});if(0!==t.length){var o=t[this.getRandomArrayIndex(t)];e[o.col][o.row]=this.getRandomNumber()}}},{key:"move",value:function(e){var t=!1,a=!1,n=!1,r=this.convertTo2D(this.gameState.board);switch(e){case"up":r=this.turnBoard(r),t=!0;break;case"left":r=this.transposeBoard(r),r=this.turnBoard(r),t=!0,a=!0;break;case"right":r=this.transposeBoard(r),a=!0;break;default:n="down"!==e}if(!n){for(var o=this.duplicate(r),i=0;i<this.dimension;i++)r[i]=this.handle(r[i]);var s=this.isDifferent(o,r);t&&(r=this.turnBoard(r)),a&&(r=this.transposeBoard(r)),s&&this.addNumber(r),this.gameState.over=this.isGameOver(r),this.gameState.won=this.isGameWon(r),this.gameState.won&&this.winCallback?this.winCallback():!this.gameState.won&&this.gameState.over&&this.loseCallback&&this.loseCallback(),this.gameState.board=this.convertTo1D(r),this.moveCallback(this)}}},{key:"handle",value:function(e){return this.translate(this.merge(this.translate(e)))}},{key:"blankGrid",value:function(){for(var e=[],t=this.dimension,a=0;a<t;a++)e.push(Array(t).fill(0));return e}},{key:"convertTo2D",value:function(e){var t=this,a=this.blankGrid();return e.forEach((function(e,n){return a[Math.floor(n%t.dimension)][Math.floor(n/t.dimension)]=e})),a}},{key:"convertTo1D",value:function(e){for(var t=this.dimension,a=Array(t*t).fill(0),n=0,r=0;r<t;r++)for(var o=0;o<t;o++)a[n++]=e[o][r];return a}},{key:"duplicate",value:function(e){for(var t=this.dimension,a=this.blankGrid(),n=0;n<t;n++)for(var r=0;r<t;r++)a[n][r]=e[n][r];return a}},{key:"isDifferent",value:function(e,t){for(var a=this.dimension,n=0;n<a;n++)for(var r=0;r<a;r++)if(e[n][r]!==t[n][r])return!0;return!1}},{key:"translate",value:function(e){var t=e.filter((function(e){return e}));return Array(this.dimension-t.length).fill(0).concat(t)}},{key:"merge",value:function(e){for(var t=this.dimension-1;t>=1;t--){var a=e[t],n=e[t-1];if(a===n){var r=a+n;e[t]=r,this.gameState.score+=r,e[t-1]=0}}return e}},{key:"turnBoard",value:function(e){for(var t=0;t<this.dimension;t++)e[t].reverse();return e}},{key:"transposeBoard",value:function(e){for(var t=this.blankGrid(),a=this.dimension,n=0;n<a;n++)for(var r=0;r<a;r++)t[n][r]=e[r][n];return t}},{key:"getGameState",value:function(){return this.gameState}},{key:"toString",value:function(){for(var e=this.convertTo2D(this.gameState.board),t=this.dimension,a=0;a<t;a++)console.log(e[a])}}]),e}()),m=a(5),f=function(e){return{2:"#4A6075",4:"#6C78EF",8:"#20347D",16:"#79779A",32:"#55537E",64:"#9370DB",128:"#BFA36D",256:"#7665C2",512:"#B4976D",1024:"#91744B",2048:"#DDC5A2"}[e]},v=function(e){return e<100?"auto":e<1e3?"3rem":"2.7rem"},d=function(e){var t=e.game;return Object(m.a)("keydown",(function(e){switch(e.key){case"ArrowUp":t.move("up");break;case"ArrowDown":t.move("down");break;case"ArrowRight":t.move("right");break;case"ArrowLeft":t.move("left")}})),t&&r.a.createElement("div",{className:"game-board"},t.gameState.board.map((function(e,t){return r.a.createElement("div",{key:t,style:{backgroundColor:f(e),fontSize:v(e)}},0!==e&&e)})))},k=new h(4),b=function(e){Object(c.a)(a,e);var t=Object(l.a)(a);function a(){var e;return Object(s.a)(this,a),(e=t.call(this)).state={game:k},e}return Object(u.a)(a,[{key:"componentDidMount",value:function(){this.setCallback()}},{key:"setCallback",value:function(){var e=this;k.onMove((function(t){return e.setState({game:t})})),this.setState({game:k})}},{key:"resetGame",value:function(){this.state.game.setupNewGame(),this.setState({game:k})}},{key:"render",value:function(){var e=this,t=this.state.game,a=t&&t.gameState,n=a.won,o=a.over;return t&&(t.board=t.convertTo2D(t.gameState.board)),r.a.createElement("div",{className:"App"},r.a.createElement("h3",{className:"header"},"2048 for COMP 426"),r.a.createElement("div",{class:"flex-row"},r.a.createElement("h2",null,"Score: ",t.gameState.score),r.a.createElement("button",{onClick:function(){return e.resetGame()}},"Reset Game")),n&&r.a.createElement("h2",{className:"won"},"You won the game!!!"),!n&&o&&r.a.createElement("h2",{className:"over"},"The game is over..."),t&&t.gameState&&r.a.createElement(d,{game:t}))}}]),a}(n.Component);i.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(b,null)),document.getElementById("root"))},8:function(e,t,a){e.exports=a(16)}},[[8,1,2]]]);
//# sourceMappingURL=main.dc6ec29e.chunk.js.map